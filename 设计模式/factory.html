<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>工厂模式</title>
</head>

<body>
    <script type="text/javascript">
    // 工厂模式
    // 提供给一个创建一系列相关或相互依赖对象的接口,而无需指定他们具体的类.
    var XMLHttpFactory = function() {};　　　　　　 //这是一个简单工厂模式
    　　
    XMLHttpFactory.createXMLHttp = function() {　　　
            var XMLHttp = null;　　　　
            if (window.XMLHttpRequest) {　　　　　　
                XMLHttp = new XMLHttpRequest()　　　
            }
            elseif(window.ActiveXObject) {　　　　　　
                XMLHttp = new ActiveXObject("Microsoft.XMLHTTP")　　　　
            }　　
            return XMLHttp;　　
        }　　 //XMLHttpFactory.createXMLHttp()这个方法根据当前环境的具体情况返回一个XHR对象。
        　　
    var AjaxHander = function() {　　　　
        var XMLHttp = XMLHttpFactory.createXMLHttp();　　　　
    }

    // 模式又区分简单工厂模式和抽象工厂模式，上面介绍的是简单工厂模式，这种模式用的更多也更简单易用。抽象工厂模式的使用方法就是 - 先设计一个抽象类，这个类不能被实例化，只能用来派生子类，最后通过对子类的扩展实现工厂方法。 示例：
    var XMLHttpFactory = function() {};　 //这是一个抽象工厂模式
    　　
    XMLHttpFactory.prototype = {　　 //如果真的要调用这个方法会抛出一个错误，它不能被实例化，只能用来派生子类
            　　
            createFactory: function() {　　
                throw new Error('This is an abstract class');　　
            }　　
        }　　 //派生子类，文章开始处有基础介绍那有讲解继承的模式，不明白可以去参考原理
        　　
    var XHRHandler = function() {　　
        XMLHttpFactory.call(this);　　
    };　　
    XHRHandler.prototype = new XMLHttpFactory();　　
    XHRHandler.prototype.constructor = XHRHandler;　　 //重新定义createFactory 方法
    　　
    XHRHandler.prototype.createFactory = function() {　　
        var XMLHttp = null;　　
        if (window.XMLHttpRequest) {　　
            XMLHttp = new XMLHttpRequest()　　
        }
        elseif(window.ActiveXObject) {　　
            XMLHttp = new ActiveXObject("Microsoft.XMLHTTP")　　
        }　　
        return XMLHttp;　　
    }
    </script>
</body>

</html>
